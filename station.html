<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <title>محطات نور خوي</title>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
    <script src="https://unpkg.com/kdbush@3.0.0/kdbush.min.js"></script>
    <script src="https://unpkg.com/geokdbush@2.0.0/dist/geokdbush.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAuoser5drR-xx8k9GzGz3d8FZNBY60_LE&libraries=geometry&callback=initMap"></script>
    <script type="module" src="script.js"></script>
    <script src="map.js" defer></script>
</head>
<body class="body">
    <!-- نافذة ملفات تعريف الارتباط -->
    <div id="cookieConsent">
        <p>نستخدم ملفات تعريف الارتباط لتحسين تجربتك. <a href="/privacy">المزيد من المعلومات</a>.</p>
        <button id="acceptCookies">موافق</button>
    </div>
    <!-- نافذة الرسالة المخصصة -->
    <div id="customAlert" class="custom-alert">
        <div class="alert-content">
            <span class="close-btn" onclick="closeCustomAlert()">&times;</span>
            <h3 id="alertTitle"></h3>
            <p id="alertMessage"></p>
            <p class="welcome-message">نتشرف بتواجدك</p>
        </div>
    </div>

    <!-- رسالة التحميل -->
<!-- رسالة التحميل -->
<div id="loadingMessage" class="loading-message">
    <div class="loader">
        <svg class="loader-svg" version="1.1" id="Capa_1" 
             xmlns="http://www.w3.org/2000/svg" 
             xmlns:xlink="http://www.w3.org/1999/xlink" 
             x="0px" y="0px" 
             viewBox="0 0 47.94 47.94" 
             xml:space="preserve">
            <path class="loader-path" d="M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956C22.602,0.567,25.338,0.567,26.285,2.486z"/>
        </svg>
    </div>
</div>

    <!-- زر فتح/إغلاق القائمة -->
    <button id="toggleSidebar" class="toggle-sidebar" aria-label="فتح القائمة الجانبية">
        <i class="fas fa-bars"></i>
    </button>

    <!-- القائمة الجانبية -->
    <nav class="sidebar" aria-label="القائمة الجانبية الرئيسية">
        <div class="sidebar-handle" role="button" aria-label="فتح/إغلاق القائمة"></div>
        <ul role="menu">
            <li role="none"><a href="index.html" role="menuitem"><i class="fas fa-home"></i> الرئيسية</a></li>
            <li role="none"><a href="station.html" role="menuitem"><i class="fas fa-gas-pump"></i> المحطات</a></li>
        </ul>
    </nav>

    <!-- الهيدر -->
    <header class="header">
        <img src="../logo1.png" alt="شعار محطات نور خوي" class="logo" />
        <h1>محطات نور خوي</h1>
        <h2 class="visually-hidden">إحصائيات المحطات</h2>
        <button id="languageToggle" onclick="toggleLanguage()" aria-label="تغيير اللغة">
            <i class="fas fa-globe"></i>
        </button>
    </header>

    <!-- الخريطة -->
    <div class="map-container" id="map"></div>

    <!-- المحتوى الرئيسي -->
    <div class="main-content">
        <div class="select-container">
            <div class="form-group">
                <label for="regionSelect"></label>
                <select id="regionSelect" class="form-control" aria-label="اختر المنطقة">
                    <option value="">اختر منطقة</option>
                </select>
                <div id="regionSelectError" class="error-message"></div>
            </div>
            
            <div class="form-group">
                <label for="startLocation"></label>
                <select id="startLocation" class="form-control" disabled aria-label="اختر نقطة البداية">
                    <option value="موقعي الحالي">موقعي الحالي</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="endLocation"></label>
                <select id="endLocation" class="form-control" disabled aria-label="اختر نقطة النهاية">
                    <option value="موقعي الحالي">موقعي الحالي</option>
                </select>
            </div>
            
            <div class="button-group">
                <button id="resetButton" onclick="resetAll()" class="bat btn-reset" aria-label="إعادة تعيين الإعدادات">
                    إعادة التعيين
                </button>
                <button id="nearestStationButton" 
                        onclick="findNearestStation()" 
                        class="btn btn-primary"
                        aria-label="البحث عن أقرب محطة وقود">
                    عرض أقرب محطة
                </button>
            </div>
        </div>
    </div>

<!-- الجداول -->
<div class="tables-container">
    <!-- الجدول الأول -->
    <div class="table-wrapper">
        <div class="table-container">
            <h4 id="regionsTableTitle">المناطق والمواقع</h4>
            <div class="scrollable-table">
                <table class="regions-table">
                    <thead>
                        <tr>
                            <th scope="col" class="region-col">المنطقة</th>
                            <th scope="col" class="location-col">الموقع</th>
                            <th scope="col" class="distance-col">من مركز المدينة (كم)</th>
                            <th scope="col" class="actions-col">الخريطة</th>
                        </tr>
                    </thead>
                    <tbody id="regionsTable">
                        <!-- البيانات ستضاف عبر الجافاسكريبت -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- الجدول الثاني -->
    <div class="table-wrapper">
        <div class="table-container">
            <h4 id="distanceTableTitle">حساب المسافة بين موقعين</h4>
            <table class="distance-table">
                <thead>
                    <tr>
                        <th scope="col" class="start-col">الموقع الأول</th>
                        <th scope="col" class="end-col">الموقع الثاني</th>
                        <th scope="col" class="result-col">المسافة (كم)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td id="selectedStart" data-label="الموقع الأول">---</td>
                        <td id="selectedEnd" data-label="الموقع الثاني">---</td>
                        <td id="calculatedDistance" data-label="المسافة">---</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

    <!-- الفوتر -->
    <footer class="footer">
        <p class="footer-title">حقوق النشر © <span>Noor Khoy</span> <span id="currentYear"></span></p>
    </footer>
    
</body>
</html>
